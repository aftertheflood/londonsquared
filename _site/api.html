<!DOCTYPE html>
<html>
  <head>
    <!-- <link rel="stylesheet" href="/assets/css/type.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/syntax.css" type="text/css">
    <link rel="stylesheet" href="/assets/css/layout.css" type="text/css"> -->

    <link rel="stylesheet" href="http://localhost:3000/assets/css/type.css" type="text/css">
    <link rel="stylesheet" href="http://localhost:3000/assets/css/syntax.css" type="text/css">
    <link rel="stylesheet" href="http://localhost:3000/assets/css/layout.css" type="text/css">
    <title>After The Flood</title>
  </head>
  <body>
    <div class="page">
      <header>
        <h1><span class="highlight">After The Flood, London Squared</span> <span class="secondary">A visualization layout for London borough data</span></h1>
      </header>
      <div role="main" class="content full-width">
      <h2 id="london-squared-d3-module-api">London Squared D3 module. API</h2>

<h4 id="londonsquared">londonSquared()</h4>

<p>Create a London Squared layout</p>

<p><em>Note: all the example code assumes you’re using the module via the script tag method explained above so the <code class="highlighter-rouge">londonSquared</code> function is preceded by the <code class="highlighter-rouge">atf</code> global name-spacing variable.</em></p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// create the londonSquared layout...</span>
<span class="kd">const</span> <span class="nx">LS</span> <span class="o">=</span> <span class="nx">atf</span><span class="p">.</span><span class="nx">londonSquared</span><span class="p">();</span>

<span class="c1">// render the cartogram by calling it on a d3 selection</span>
<span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s1">'svg'</span><span class="p">).</span><span class="nx">call</span><span class="p">(</span><span class="nx">LS</span><span class="p">)</span>
</code></pre></div></div>

<h4 id="londonsquaredwidthnumber-londonsquaredheightnumber">londonSquared.width([number]), londonSquared.height([number])</h4>

<p>Constrain the width height of the cartogram. If no argument is supplied the current width is returned.</p>

<p>Because the aspect ratio of the cartogram is fixed the rendered cartogram may not be exactly the same size as the specified dimensions but it will be as big as possible.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">const</span> <span class="nx">LS</span> <span class="o">=</span> <span class="nx">atf</span><span class="p">.</span><span class="nx">londonSquared</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">width</span><span class="p">(</span><span class="mi">600</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">height</span><span class="p">(</span><span class="mi">600</span><span class="p">);</span>
</code></pre></div></div>

<p>Set the height of the cartogram. If no argument is supplied the current height is returned.</p>

<h4 id="londonsquaredcentroid">londonSquared.centroid()</h4>

<p>Returns the center point coordinates <code class="highlighter-rouge">[x, y]</code> for a an area of the cartogram relative the that area’s registration point.</p>

<h4 id="londonsquaredblocksize">londonSquared.blockSize()</h4>

<p>Returns the width or height (same thing) for a regular area of the cartogram. This is useful for constructing scales for the data to be visualised within each area of the cartogram.</p>

<h4 id="londonsquaredmasked">londonSquared.masked()</h4>

<p>This function returns a <a href="https://github.com/d3/d3-selection/blob/master/README.md">D3 selection</a> of groups which are masked by the shape of the borough which the represent allowing you to attach shapes and visualizations that will not overspill the bounds of the cartogram area.</p>

<h4 id="londonsquaredforeground">londonSquared.foreground()</h4>

<p>This function returns a <a href="https://github.com/d3/d3-selection/blob/master/README.md">D3 selection</a> of groups which are masked by the shape of the borough which the represent allowing you to attach shapes and visualizations that will overspill the bounds of the cartogram area.</p>

<h4 id="londonsquaredbackground">londonSquared.background()</h4>

<p>This function returns a <a href="https://github.com/d3/d3-selection/blob/master/README.md">D3 selection</a> of the cartogram area background shapes allowing you to change the colour and other properties of the cartogram area backgrounds.</p>

<h4 id="londonsquaredinteraction">londonSquared.interaction()</h4>

<p>This function returns a <a href="https://github.com/d3/d3-selection/blob/master/README.md">D3 selection</a> of the cartogram area interaction shapes allowing you to change the colour and other properties of the cartogram area backgrounds.</p>

<p>What’s an ‘interaction shape’?  Good question, interaction shapes are invisible shapes which have the data data bound to them and are useful for attaching interaction behaviours, such as event listeners to.</p>

<p>See the interactive example: <a href="http://aftertheflood.github.io/londonsquared/site/london-borough-population-interactive.html">Demo</a>, <a href="https://github.com/aftertheflood/londonsquared/blob/master/site/london-borough-population-interactive.html">Code</a>.</p>

<h4 id="londonsquareddataarrayaccessor">londonSquared.data([array],[accessor])</h4>

<p>This function sets the data to bind to the cartogram areas (<em>array</em>)and the mechanism by which to bind it (<em>accessor</em> function) returns the data as bound to the cartogram areas, including abbreviations, names etc for the</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// bind and array of data "boroughData" </span>
<span class="c1">// to the cartogram areas by the property </span>
<span class="c1">// "ONS Area Code"</span>

<span class="kd">const</span> <span class="nx">LS</span> <span class="o">=</span> <span class="nx">atf</span><span class="p">.</span><span class="nx">londonSquared</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">boroughData</span><span class="p">,</span> <span class="nx">d</span><span class="o">=&gt;</span><span class="nx">d</span><span class="p">[</span><span class="s1">'ONS Area Code'</span><span class="p">])</span>
</code></pre></div></div>


      </div>
      <footer>
        <p class="secondary">
          After the flood
          <br>140–142 St John St, London, EC1V 4UB, UK
          <br>info@aftertheflood.com
          <br><a href="href=https://twitter.com/AftertheFloodco">@Afterthefloodco</a>
          <br>Registered in England and Wales as After the flood Limited. 7792366
        </p>
      </footer>
    </div>
  </body>
</html>